<img src='figures/title-full-underline.png' align="left"/><img src='figures/brc-corporate-logo.png' align="right"/>

[![Contributor Covenant](https://img.shields.io/badge/Contributor%20Covenant-v2.0%20adopted-ff69b4.svg)](code_of_conduct.md) 

## Overview
The purpose of the index is to identify UK areas vulnerable to the effects of COVID-19. To achieve this, sources of (mostly) open data have been combined and vulnerability scores computed for various geographical areas.

## Geographical areas
Vulnerability scores have been computed at the local authority (LA), middle super output area (MSOA), and ward level. This is to allow different levels of geographical analysis. LA's are the largest geographical areas, followed by MSOA's, and then wards. The difference in areas between LA's and MSOA's can be visualised in the maps below (notice the area of the shapes):

<img src='figures/uk-vi-msoa-la.png' align="centre"/>

## Vulnerability scores
To calculate vulnerability scores, presented as quintiles and deciles in the above maps (more on that soon), a variety of indicators were collected (e.g., asthma prevalence rate). These indicators were then grouped into four domains depending on the information they captured:  
- **Clinical** (underlying health conditions)  
- **Health and wellbeing** (including mental health and loneliness)  
- **Economic** 
- **Social** (including barriers to housing and services, poor living environment)  

A score for each domain was then computed. To account for correlation among indicators in a given domain, unsupervised machine learning methods (MFLA and PCA) were used to weight indicators during the computation. A list of indicators and their domains can be found in [this](https://github.com/britishredcrosssociety/covid-19-vulnerability/blob/readme/output/metadata_vi.csv) metadata file.

The four domain scores were then combined to produce an overall vulnerability score (currently the domains are combined with equal weighting). This score is then ranked and quantised (split into groups, each containing the same fraction of the total population). The quantisation is at quintiles for LA level indicators and deciles for MSOA level indicators, with the first quintile/decile equaling the least vulnerable. The whole process of computing a vulnerability sore can be visualised in the below diagram:

<img src='figures/vi-flow-borderless.png' align="centre"/>

There's more information about our approach, current indicators and data sources, and forthcoming vulnerabilities in [this open document](https://docs.google.com/document/d/1aWpzgvLKGEF5Ay_xVps17nnbT1zIEki7RGIIJXL5APo/edit#).

## Usage
The vulnerability index can be viewed as interactive maps:
- Vulnerability in Local Authorities: https://arcg.is/1uSfy4  
- Vulnerability in Middle Layer Super Output Areas (MSOAs): https://arcg.is/1fiKaS  
- Vulnerabilty in wards: (removed for now due to technical difficulties)  

It can also be viewed as static files:
- the overall COVID-19 Vulnerability Index in `.csv` format for [MSOAs](https://github.com/britishredcrosssociety/covid-19-vulnerability/raw/master/output/vulnerability-MSOA-UK.csv), [wards](https://github.com/britishredcrosssociety/covid-19-vulnerability/blob/master/output/vulnerability-scores-ward.csv) and [Local Authorities](https://github.com/britishredcrosssociety/covid-19-vulnerability/blob/master/output/vulnerability-LA.csv)
- the Vulnerability Index in `.geojson` format for [MSOAs](https://github.com/britishredcrosssociety/covid-19-vulnerability/raw/master/output/vulnerability-MSOA.geojson), [wards](https://github.com/britishredcrosssociety/covid-19-vulnerability/blob/master/output/vulnerability-ward.geojson) and [Local Authorities](https://github.com/britishredcrosssociety/covid-19-vulnerability/blob/master/output/vulnerability-LA.geojson)

Alternatively, if you would rather run the code to generate the vulnerability index ouput, you will need to install R and ideally RStudio. Run the following to install all necessary packages:

```r
install.packages(c("tidyverse", "readxl", "janitor", "xml2", "Hmisc", "sf", "rmapshaper", "httr", "classInt", "RCurl", "jsonlite", "broom"))
```

- Run the code in `create vulnerability index - MSOA.r` to create the overall index for Middle Layer Super Output Areas
- Run the code in `create vulnerability index - LA.r` to create the overall index for Local Authorities (this aggregates the Index from MSOAs up into LAs and adds in a few other LA-level indicators)
- Run the code in `create vulnerability index - wards.r` to create the overall index for Wards (this aggregates the Index from MSOAs up into Wards)

## Contributing

To contribute to this project, please follow [GitHub Flow](https://guides.github.com/introduction/flow/) when submitting changes.

> Please note that this project is released with a Contributor Code of Conduct. By participating in this project you agree to abide by its terms.

## Credits
Designed and developed by [Matt Thomas](https://twitter.com/matthewgthomas) and Ellen Gordon at the British Red Cross.

With contributions from

- [Mike Page](https://github.com/MikeJohnPage) (British Red Cross)
- [Tom Russell](https://twitter.com/tlrss) (University of Oxford)
- [Obi Thompson Sargoni](https://github.com/obisargoni) (Centre for Advanced Spatial Analysis, University College London)
- [Brian Johnston](https://twitter.com/geo_brianj) (Queens University Belfast)

[Contains public sector information licensed under the Open Government Licence v3.0.](http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/)
